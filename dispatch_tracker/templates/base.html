<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>{% block title %}Dispatch Tracker{% endblock %}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;margin:0;background:#f7f7fb;color:#111}
    header,footer{padding:1rem 1.25rem;background:#fff;border-bottom:1px solid #eee}
    main{max-width:'80%';margin:2rem auto;padding:0 1rem}
    .card{background:#fff;border:1px solid #eee;border-radius:12px;padding:1rem}
    .btn{display:inline-block;padding:.6rem 1rem;border:1px solid #222;border-radius:8px;text-decoration:none}
    .btn-primary{background:#111;color:#fff}
    form .row{margin-bottom:.75rem}
    input,select{width:100%;padding:.6rem;border:1px solid #ddd;border-radius:8px}
    .errorlist{color:#b01e2f;margin:.5rem 0 0 0;list-style:none;padding:0}
    nav a{margin-right:1rem}
    .badge{display:inline-block;padding:.15rem .5rem;border-radius:999px;font-size:.82rem;border:1px solid rgba(0,0,0,.08)}
    .badge-pending{background:#fff8e1;border-color:#ffecb3}
    .badge-intransit{background:#e3f2fd;border-color:#bbdefb}
    .badge-delivered{background:#e8f5e9;border-color:#c8e6c9}
    .badge-failed{background:#ffebee;border-color:#ffcdd2}
  </style>
  {% block head %}{% endblock %}
</head>
<body>
  <header>
    <nav>
      <a href="{% url 'home' %}">Home</a>

      {% if user.is_authenticated %}
        <a href="{% url 'accounts:profile' %}">My Profile</a>
        <a href="{% url 'accounts:redirect-dashboard' %}">Dashboard</a>

        {% if user.role == 'ADMIN' or user.role == 'STAFF' %}
          <a href="{% url 'accounts:users' %}">Users</a>
          <a href="{% url 'clients:list' %}">Clients</a>
          <a href="{% url 'drivers:list' %}">Drivers</a>
          <a href="{% url 'dispatches:list' %}">Dispatches</a>
        {% elif user.role == 'DRIVER' %}
          <a href="{% url 'dispatches:driver-my' %}">My Assignments</a>
        {% elif user.role == 'CLIENT' %}
          <a href="{% url 'dispatches:client-my' %}">My Dispatches</a>
        {% endif %}

        <a href="{% url 'accounts:logout' %}">Logout</a>
      {% else %}
        <a href="{% url 'accounts:login' %}">Login</a>
      {% endif %}
    </nav>

    {% if messages %}
      <div class="card" style="margin-top:.75rem">
        <ul style="margin:0;padding-left:1rem">
          {% for m in messages %}
            <li>{{ m }}</li>
          {% endfor %}
        </ul>
      </div>
    {% endif %}
  </header>

  <main>
    {% block content %}{% endblock %}
  </main>

  <footer>
    &copy; {% now "Y" %} Dispatch Tracker, @anneteachieng. Alx SE
  </footer>
</body>
</html>
